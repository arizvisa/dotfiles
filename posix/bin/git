#!/bin/sh
name=git
posix=`PATH=/bin:/sbin:/usr/bin:/usr/sbin which git 2>/dev/null`
windows="$PROGRAMFILES/Git/Cmd/git.exe"

## determine the platform from the system if uname doesn't have a -o option
platform=`uname -o 2>/dev/null`
if test $? -gt 0; then
    case `uname -s` in
        MINGW32*) platform="Msys" ;;
        *) platform="unknown" ;;
    esac
fi

## determine which program to run
if test "$platform" = "Msys"; then
    prog=`test "$posix" = "" && echo -n "$windows" || echo -n "$posix"`
else
    prog=""
    IFS=":"; for p in $PATH; do
        test -x "$p/$name" && test "$p/$name" != "$0" && prog="$p/$name"
    done
    test -z "$prog" && echo "Unable to locate $name" 1>&2 && exit 1
fi

# go for it
"$prog" "$@"
